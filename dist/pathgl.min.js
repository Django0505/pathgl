!function(){function e(t){function n(e){var t=a(e);return+(255*t[0])<<16^255*t[1]<<8^255*t[2]<<0}function r(e){return e=Math.floor(e),[(255&e>>16)/255,(255&e>>8)/255,(255&e)/255]}function i(e,t,n){if(0===t)return[n,n,n];var r=.5>=n?n*(1+t):n+t-n*t,i=2*n-r;return[o(i,r,e+1/3),o(i,r,e),o(i,r,e-1/3)]}function o(e,t,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?e+6*(t-e)*n:.5>n?t:2/3>n?e+6*(t-e)*(2/3-n):e}function a(e){if(Q[e])return r(Q[e]);if(/^hsl/i.test(e)){var t=e.split(/,|\(/).map(parseFloat);return i(t[1]/360,t[2]/100,t[3]/100)}if(/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(e)){var n=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(e);return[Math.min(255,parseInt(n[1],10))/255,Math.min(255,parseInt(n[2],10))/255,Math.min(255,parseInt(n[3],10))/255]}if(/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(e)){var n=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(e);return[Math.min(100,parseInt(n[1],10))/100,Math.min(100,parseInt(n[2],10))/100,Math.min(100,parseInt(n[3],10))/100]}if(/^\#([0-9a-f]{6})$/i.test(e)){var n=/^\#([0-9a-f]{6})$/i.exec(e);return r(parseInt(n[1],16))}if(/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(e)){var n=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(e);return r(parseInt(n[1]+n[1]+n[2]+n[2]+n[3]+n[3],16))}return null}function u(e,t){if(J=K.createProgram(),e=f(K.VERTEX_SHADER,e),t=f(K.FRAGMENT_SHADER,t),K.attachShader(J,e),K.attachShader(J,t),K.deleteShader(e),K.deleteShader(t),K.bindAttribLocation(J,0,"pos"),K.bindAttribLocation(J,1,"fill"),K.bindAttribLocation(J,2,"stroke"),K.bindAttribLocation(J,4,"fugue"),K.linkProgram(J),K.useProgram(J),J.pos=0,J.fill=1,J.stroke=2,J.fugue=4,!K.getProgramParameter(J,K.LINK_STATUS))throw name+": "+K.getProgramInfoLog(J);return j({type:[0],mouse:[0,0],dates:[0,0],resolution:[0,0],clock:[0]},s),J}function c(t){j(t,function(e,t,n){"cx"==t&&(n.x=e),"cy"==t&&(n.y=e)});var n=V({stroke:"vec4(unpack_color(stroke), 1.);",radius:"2. * pos.z;",x:"pos.x;",y:"pos.y;"},t),r=e.vertexShader;for(var i in n)r=r.replace("replace_"+i,n[i]);return u(r,e.fragmentShader)}function f(e,t){var n=K.createShader(e);if(K.shaderSource(n,t),K.compileShader(n),!K.getShaderParameter(n,K.COMPILE_STATUS))throw t+" "+K.getShaderInfoLog(n);return n}function s(e,t){var n,r=K.getUniformLocation(J,t);(J[t]=function(t){if(n!=t){if(null==t)return n;K["uniform"+e.length+"fv"](r,Array.isArray(t)?t:[t]),n=t}})(e)}function l(e){if(!(K=v(t=e)))return console.log("webGL context could not be initialized")||null;J=c(),b(t),h(t),d(t);var n=Date.now();return Z(function r(){z(new Date-n),Z(r)}),t}function d(){K.disable(K.SCISSOR_TEST),K.stencilMask(1,1,1,1),K.clear(K.COLOR_BUFFER_BIT),K.colorMask(!0,!0,!0,!0),K.disable(K.BLEND),K.enable(K.CULL_FACE)}function h(t){setInterval(function(){e.uniform("resolution",[t.width,t.height])},50),t.addEventListener("click",p),t.addEventListener("mousemove",g),t.addEventListener("touchmove",m),t.addEventListener("touchstart",m)}function p(){}function g(n){var r=t.getBoundingClientRect();e.uniform("mouse",[n.clientX-r.left-t.clientLeft,n.clientY-r.top-t.clientTop])}function m(n){var r=t.getBoundingClientRect();n=n.touches[0],e.uniform("mouse",[n.clientX-r.left-t.clientLeft,n.clientY-r.top-t.clientTop])}function b(e){return V(e,{appendChild:P,querySelectorAll:E,querySelector:function(e){return this.querySelectorAll(e)[0]},removeChild:q,insertBefore:O,gl:K,__scene__:[],__pos__:[],__program__:void 0})}function v(e){var t=e.getContext("webgl")||e.getContext("experimental-webgl");return t&&V(t,{viewportWidth:e.width,viewportHeight:e.height})}function y(e){var t=[],n=this.buffer,r=this.posBuffer,i=this.indices,o=[0,0],a=i.length,u=0,c=[0,0];for(e.match(/[a-z][^a-z]*/gi).forEach(function(e){for(var n=e.slice(1).trim().split(/,| /g),r=e[0].toLowerCase(),i=0;i<n.length;){var a=n[i++],u=n[i++];"m"==r?c=o=[a,u]:"l"==r?t.push(o[0],o[1],a,u)&&(o=[a,u]):"z"==r?t.push(o[0],o[1],c[0],c[1])&&(o=c):console.log("%d method is not supported malformed path:",r)}});i.length<t.length;)i.push(n.count+u++);i.length>t.length&&(i.length=t.length),i.forEach(function(e,i){r[3*n[e]+e%3]=i<t.length&&t[i]}),n.count+=t.length-a}function A(){var e=d3.selectAll("style")[0].map(function(){return this.sheet}).reduce(function(e,t){var n={};return j(t.cssRules,function(e){for(var t=e.length,r={};t--;){var i=e[e[t]];r[i]=e[i]}n[e.selectorText]=r}),V(e,n)},{});j(e,function(e,t){d3.select(t).attr(e)})}function _(){tt=K.createBuffer(),nt=K.createBuffer(),rt=K.createBuffer(),it=K.createBuffer()}function w(){tt||_(),t.pb;var e=t.ppb;bt&&(mt&&(K.bindBuffer(K.ARRAY_BUFFER,tt),K.bufferData(K.ARRAY_BUFFER,e,K.DYNAMIC_DRAW),K.vertexAttribPointer(J.pos,4,K.FLOAT,!1,0,0),K.enableVertexAttribArray(J.pos),K.bindBuffer(K.ARRAY_BUFFER,nt),K.bufferData(K.ARRAY_BUFFER,gt,K.DYNAMIC_DRAW),K.vertexAttribPointer(J.fill,1,K.FLOAT,!1,0,0),K.enableVertexAttribArray(J.fill),K.bindBuffer(K.ARRAY_BUFFER,rt),K.bufferData(K.ARRAY_BUFFER,gt,K.DYNAMIC_DRAW),K.vertexAttribPointer(J.stroke,1,K.FLOAT,!1,0,0),K.enableVertexAttribArray(J.stroke),K.bindBuffer(K.ARRAY_BUFFER,it),K.bufferData(K.ARRAY_BUFFER,At,K.DYNAMIC_DRAW),K.vertexAttribPointer(J.fugue,4,K.FLOAT,!1,0,0),K.enableVertexAttribArray(J.fugue),mt=!1),K.drawArrays(K.POINTS,0,bt))}function R(){ot=K.createBuffer(),at=K.createBuffer(),ut=K.createBuffer(),ct=K.createBuffer()}function x(){ot||R(),vt&&(yt&&(K.bindBuffer(K.ARRAY_BUFFER,ot),K.bufferData(K.ARRAY_BUFFER,st,K.DYNAMIC_DRAW),K.vertexAttribPointer(J.pos,2,K.FLOAT,!1,0,0),K.enableVertexAttribArray(J.pos),K.bindBuffer(K.ARRAY_BUFFER,at),K.bufferData(K.ARRAY_BUFFER,gt,K.DYNAMIC_DRAW),K.vertexAttribPointer(J.fill,1,K.FLOAT,!1,0,0),K.enableVertexAttribArray(J.fill),K.bindBuffer(K.ARRAY_BUFFER,ut),K.bufferData(K.ARRAY_BUFFER,gt,K.DYNAMIC_DRAW),K.vertexAttribPointer(J.stroke,1,K.FLOAT,!1,0,0),K.enableVertexAttribArray(J.stroke),e.uniform("type",0),yt=!1),K.drawArrays(K.LINES,0,vt))}function k(){}function E(e,t){return e.replace(/^\s+|\s*([,\s\+\~>]|$)\s*/g,"$1").split(",").forEach(function(e){B(e,this).forEach(H.bind(t=[]))},this)||t}function B(e,t){var n,r=e.split(/[\s\>\+\~](?![\s\w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^'"]*\]|[\s\w\+\-]*\))/),i=e.match(/([\s\>\+\~])(?![\s\w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^'"]*\]|[\s\w\+\-]*\))/),o=L(r.pop()),a=[],u=[];return U.call(t,o[1]||"*").forEach(function(e){(n=F.apply(e,o))&&a.push(n)}),r.length?a.forEach(function(e){S(e,r,i)&&u.push(e)})||u:a}function S(e,t,n,r){return r=function i(e,o,a){for(;a=dt[n[o]](a,e);)if(F.apply(a,L(t[o]))&&o)return(r=i(a,o-1,a))?r:a}(e,t.length-1,e)}function F(e,t,n,r,i,o,a,e,u,e,c,f){return u&&lt[u]&&!lt[u](this,c)||t&&"*"!==t&&this.tag&&this.tag.toLowerCase()!==t||r&&!D(o,this[i]||"",a)||n&&(f=n.match(/#([\w\-]+)/))&&f[1]!==this.id||n&&(n.match(/\.[\w\-]+/g)||[]).some(I.bind(this))?0:this}function D(e,t,n){return t.match(RegExp({"=":n,"^=":"^"+C(n),"$=":C(n)+"$","*=":C(n),"~=":"(?:^|\\s+)"+C(n)+"(?:\\s+|$)","|=":"^"+C(n)+"(-|$)"}[e]||"adnan^"))}function L(e){return e.match(ht)}function T(e){for(;e=e.previousSibling();)if(e.top)return e}function C(e){return e.replace(/([.*+?\^=!:${}()|\[\]\/\\])/,"\\$1")}function I(e){return!RegExp("(^|\\s+)"+e.slice(1)+"(\\s+|$)").test(this.class)}function U(e){return Y(this,function(t){return"*"==e||t.tag==e},[])}function Y(e,t,n){return(e.__scene__||e.children).forEach(function(e){Y(e,t,n),t(e)&&n.push(e)})||n}function N(e){y.call(this,e,this.stroke(this.attr.stroke)),this.stroke(this.attr.stroke)}function O(e,n){var r=t.__scene__,i=r.indexOf(n);reverseEach(r.slice(i,r.push(0)),function(e,t){r[t]=r[t-1]}),r[i]=e}function P(e){return Rt[e.tagName.toLowerCase()](e)}function q(e){var t=this.__scene__.indexOf(e);this.__scene__.splice(t,1);for(var n=0;4>n;n++)e.buffer[e.index+n]=0}function $(e){return function(n){var r=new e,i=r.buffer||[],o=2*t.__scene__.push(r);r.attr=Object.create(xt),r.tag=n.tagName.toLowerCase(),r.parentNode=r.parentElement=t;var a=r.indices="line"==e.name?[o,o+1]:"circle"==e.name?[4*o]:"rect"==e.name?[4*o]:[];return a.forEach(function(e){i[e]=o+e%2}),"path"!==e.name&&(o+="line"==e.name?2:1),"line"==e.name&&(vt+=1),"circle"==e.name&&(bt+=1,At[4*bt]=1),"rect"==e.name&&(bt+=1,At[4*bt]=0),r}}function M(){}function z(t){return G(),e.uniform("clock",t),w(t),x(t),k(t),et&&G()}function G(){K.clear(K.COLOR_BUFFER_BIT)}function W(){}function V(e,t){if(arguments.length>2)[].forEach.call(arguments,function(t){V(e,t)});else for(var n in t)e[n]=t[n];return e}function X(){return!1}function j(e,t){for(var n in e)t(e[n],n,e)}function H(e){return this.push(e)}var K,J;if(null==t&&(t=document.body.appendChild(V(document.createElement("canvas"),{height:500,width:960}))),t="string"==typeof t?document.querySelector(t):t instanceof d3.selection?t.node():t,!t)return console.log("invalid selector");if(!t.getContext)return console.log(t,"is not a valid canvas");var Q={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};e.texture=function(e,t){"string"==typeof e&&(e=document.querySelector(e)),t=t||{},this.format=t.format||K.RGBA,this.type=t.type||K.UNSIGNED_BYTE;var n=K.createTexture();K.bindTexture(K.TEXTURE_2D,n),K.texImage2D(K.TEXTURE_2D,0,K.RGBA,1,1,0,K.RGBA,K.UNSIGNED_BYTE,new Uint8Array([0,0,255,150])),K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,1),K.bindTexture(K.TEXTURE_2D,n),e.addEventListener("load",function(){console.log("1"),K.texImage2D(K.TEXTURE_2D,0,K.RGBA,K.RGBA,K.UNSIGNED_BYTE,e),K.generateMipmap(K.TEXTURE_2D)})},e.texture.prototype,e.vertexShader=["precision mediump float;","uniform float clock;","uniform vec2 mouse;","uniform vec2 resolution;","uniform vec2 dates;","attribute vec4 pos;","attribute float fill;","attribute float stroke;","attribute vec4 transform;","attribute vec4 fugue;","varying float type;","varying vec4 v_stroke;","varying vec4 v_fill;","vec3 unpack_color(float col) {","    if (col == 0.) return vec3(0);","    return vec3(mod(col / 256. / 256., 256.),","                mod(col / 256. , 256.),","                mod(col, 256.)) / 256.; }","void main() {","    float x = replace_x;","    float y = replace_y;","    gl_Position = vec4(2. * (x / resolution.x) - 1., 1. - ((y / resolution.y) * 2.),  1., 1.);","    type = fugue.x;","    gl_PointSize =  replace_radius;","    v_fill = vec4(unpack_color(fill), 1.);","    v_stroke = replace_stroke;","}"].join("\n"),e.fragmentShader=["precision mediump float;","varying float type;","uniform sampler2D texture;","uniform vec2 resolution;","varying vec4 v_stroke;","varying vec4 v_fill;","void main() {","    float dist = distance(gl_PointCoord, vec2(0.5));","    if (type == 1. && dist > 0.5) discard;","    gl_FragColor = texture2D(texture, gl_PointCoord);","}"].join("\n"),d3&&(d3.selection.prototype.pAttr=function(e){return this.each(function(t){for(var n in e)this.posBuffer[this.indices[0]+this.schema.indexOf(n)]=e[n](t)}),mt=!0,this},d3.selection.prototype.shader=function(e,t){if(2==arguments.length){var n={};n[e]=t}return c(n||e),this});var Z=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),et=!1;e.stop=function(){et=!0},e.uniform=function(e,t){return J[e]?J[e](t):void 0},e.applyCSS=A;for(var tt,nt,rt,it,ot,at,ut,ct,ft=new Uint16Array(4e4),st=new Float32Array(4e4),lt={},dt={" ":function(e){return e&&e!==__scene__&&e.parent()},">":function(e,t){return e&&e.parent()==t.parent()&&e.parent()},"~":function(e){return e&&e.previousSibling()},"+":function(e,t,n,r){return!e||(n=T(e))&&(r=T(t))&&n==r&&n}},ht=/^(\*|\w+)?(?:([\.\#]+[\w\-\.#]+)?)(\[([\w\-]+)(?:([\|\^\$\*\~]?\=)['"]?([ \w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^]+)["']?)?\])?(:([\w\-]+)(\(['"]?([^()]+)['"]?\))?)?/,pt=8e5,gt=new Float32Array(pt),mt=!0,bt=0,vt=0,yt=!0,At=new Float32Array(pt),_t={circle:{r:function(e){this.posBuffer[this.indices[0]+2]=e},cx:function(e){this.posBuffer[this.indices[0]+0]=e},cy:function(e){this.posBuffer[this.indices[0]+1]=e},cz:function(e){this.posBuffer[this.indices[0]+3]=e},fill:function(e){gt[this.indices[0]/4]=n(e)},stroke:function(e){},opacity:function(){},buffer:t.pb=t.pb||new Uint16Array(pt),posBuffer:t.ppb=t.ppb||new Float32Array(pt),schema:["cx","cy","r","cz"]},ellipse:{cx:W,cy:W,rx:W,ry:W},rect:{fill:function(e){gt[this.indices[0]/4]=n(e)},width:function(e){this.posBuffer[this.indices[0]+2]=e},height:function(e){this.posBuffer[this.indices[0]+3]=e},x:function(e){this.posBuffer[this.indices[0]+0]=e},y:function(e){this.posBuffer[this.indices[0]+1]=e},rx:W,ry:W,posBuffer:t.ppb},line:{x1:function(e){this.posBuffer[2*this.indices[0]]=e},y1:function(e){this.posBuffer[2*this.indices[0]+1]=e},x2:function(e){this.posBuffer[2*this.indices[1]]=e},y2:function(e){this.posBuffer[2*this.indices[1]+1]=e},buffer:ft,posBuffer:st,stroke:function(e){var t=n(e);this.indices.forEach(function(e){gt[e]=parseInt(t.toString().slice(1),16)})}},path:{d:N,pathLength:W,buffer:ft,posBuffer:st,stroke:function(e){var t=n(e);this.indices.forEach(function(e){gt[e/2]=+parseInt(t.toString().slice(1),16)})}},polygon:{points:W},polyline:{points:W},g:{appendChild:function(e){this.children.push(P(e))},ctr:function(){this.children=[]}},text:{x:W,y:W,dx:W,dy:W}},wt=V(Object.create(null),{querySelectorAll:E,children:Object.freeze([]),ctr:$,querySelector:function(e){return this.querySelectorAll(e)[0]},createElementNS:W,insertBefore:W,ownerDocument:{createElementNS:W},render:function(){this.buffer&&drawFill(this),drawStroke(this)},previousSibling:function(){t.scene[t.__scene__.indexOf(this)-1]},nextSibling:function(){t.scene[t.__scene__.indexOf()+1]},parent:function(){return __scene__},fill:function(e){X(e)&&initShader(document.querySelector(e).textContent,e)},transform:function(){},stroke:function(e){X(e)&&initShader(document.querySelector(e).textContent,e)},getAttribute:function(e){return this.attr[e]},setAttribute:function(e,t){mt=!0,yt=!0,this.attr[e]=t,this[e]&&this[e](t)},style:{setProperty:W},removeAttribute:function(e){delete this.attr[e]},textContent:W,removeEventListener:W,addEventListener:M}),Rt=[function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}].reduce(function(e,t){return e[t.name]=$(t),t.prototype=V(Object.create(wt),_t[t.name]),e},{}),xt={rotation:[0,1],translate:[0,0],scale:[1,1],fill:0,stroke:0,"stroke-width":2,cx:0,cy:0,x:0,y:0,opacity:.999},kt=0;kt<ft.length;kt+=3)ft[kt]=kt/3,ft[kt+1]=kt/3,ft[kt+2]=kt/3;window.fb=At;var Et=(Date.now(),{});return e.frameCounter=Et,console.log.bind(console),l(t)}this.pathgl=e,e.stop=function(){},e.context=function(){},e.uniform=function(){},e.texture=function(){}}();