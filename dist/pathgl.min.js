!function(){function t(e){function n(n){return e=n,ee=s(e),ne=f(t.vertexShader,t.fragmentShader),c(e),i(e),r(e),d3.timer(z),ee?e:null}function r(){ee.disable(ee.SCISSOR_TEST),ee.colorMask(!0,!0,!0,!0),ee.stencilMask(1,1,1,1),ee.disable(ee.BLEND),ee.enable(ee.CULL_FACE)}function i(t){d3.select(t).on("mousemove.pathgl",o)}function o(){var e=d3.mouse(this);t.uniforms.mouse=[e[0]/innerWidth,e[1]/innerHeight]}function c(t){return X(t,{appendChild:$,querySelectorAll:w,querySelector:function(t){return this.querySelectorAll(t)[0]},removeChild:V,insertBefore:M,gl:ee,__scene__:[],__pos__:[],__program__:void 0})}function a(t,e){var n=ee.createShader(t);if(ee.shaderSource(n,e),ee.compileShader(n),!ee.getShaderParameter(n,ee.COMPILE_STATUS))throw e+" "+ee.getShaderInfoLog(n);return n}function f(t,e){if(ne=ee.createProgram(),t=a(ee.VERTEX_SHADER,t),e=a(ee.FRAGMENT_SHADER,e),ee.attachShader(ne,t),ee.attachShader(ne,e),ee.deleteShader(t),ee.deleteShader(e),ee.linkProgram(ne),ee.useProgram(ne),!ee.getProgramParameter(ne,ee.LINK_STATUS))throw name+": "+ee.getProgramInfoLog(ne);return Z({},u),ne.vPos=ee.getAttribLocation(ne,"pos"),ee.enableVertexAttribArray(ne.vPos),ne.vFill=ee.getAttribLocation(ne,"fill"),ee.enableVertexAttribArray(ne.vFill),ne.vStroke=ee.getAttribLocation(ne,"stroke"),ee.enableVertexAttribArray(ne.vStroke),ne}function u(t,e){var n=ee.getUniformLocation(ne,e);(ne["set"+e]=function(e){ee["uniform"+t.length+"fv"](n,Array.isArray(e)?e:[e])})(t)}function s(t){var e=t.getContext("webgl")||t.getContext("experimental-webgl");return e&&X(e,{viewportWidth:t.width,viewportHeight:t.height})}function l(){}function h(){}function d(){}function v(){}function A(){}function p(){}function g(){}function b(t){var e=[];return J(t,function(t,n){e.push(+t,+n)}),e}function E(t){var e=[];return t.match(/[a-z][^a-z]*/gi).forEach(function(t){var n=(oe[t[0].toLowerCase()],t.slice(1).trim().split(/,| /g));b(n).forEach(te,e)}),e}function R(t,e){ae=[t,e]}function m(t){ce=ae,F.apply(this,/m/i.test(t)?t.slice(1).trim().split(/,| /g):this.coords[0])}function F(t,e){this.push(ae[0],ae[1],e,0),ae=[t,e]}function y(){fe.count&&(ee.bindBuffer(ee.ARRAY_BUFFER,ee.createBuffer()),ee.enableVertexAttribArray(ne.vPos),ee.bufferData(ee.ARRAY_BUFFER,ue,ee.DYNAMIC_DRAW),ee.vertexAttribPointer(ne.vPos,4,ee.FLOAT,!1,0,0),ee.bindBuffer(ee.ARRAY_BUFFER,ee.createBuffer()),ee.enableVertexAttribArray(ne.vStroke),ee.bufferData(ee.ARRAY_BUFFER,ie,ee.DYNAMIC_DRAW),ee.vertexAttribPointer(ne.vStroke,1,ee.FLOAT,!1,0,0),ee.bindBuffer(ee.ARRAY_BUFFER,ee.createBuffer()),ee.enableVertexAttribArray(ne.vFill),ee.bufferData(ee.ARRAY_BUFFER,ie,ee.DYNAMIC_DRAW),ee.vertexAttribPointer(ne.vFill,1,ee.FLOAT,!1,0,0),ee.bindBuffer(ee.ELEMENT_ARRAY_BUFFER,ee.createBuffer()),ee.bufferData(ee.ELEMENT_ARRAY_BUFFER,fe,ee.DYNAMIC_DRAW),ee.drawElements(ee.POINTS,4*fe.count,ee.UNSIGNED_SHORT,0))}function S(){b1=ee.createBuffer(),b2=ee.createBuffer(),b3=ee.createBuffer(),b4=ee.createBuffer()}function B(){he(),ee.bindBuffer(ee.ARRAY_BUFFER,b1),ee.enableVertexAttribArray(ne.vPos),ee.bufferData(ee.ARRAY_BUFFER,le,ee.DYNAMIC_DRAW),ee.vertexAttribPointer(ne.vPos,2,ee.FLOAT,!1,0,0),ee.bindBuffer(ee.ARRAY_BUFFER,b2),ee.enableVertexAttribArray(ne.vStroke),b4._||ee.bufferData(ee.ARRAY_BUFFER,ie,ee.DYNAMIC_DRAW),ee.vertexAttribPointer(ne.vStroke,1,ee.FLOAT,!1,0,0),ee.bindBuffer(ee.ARRAY_BUFFER,b3),ee.enableVertexAttribArray(ne.vFill),b4._||ee.bufferData(ee.ARRAY_BUFFER,ie,ee.DYNAMIC_DRAW),ee.vertexAttribPointer(ne.vFill,1,ee.FLOAT,!1,0,0),ee.bindBuffer(ee.ELEMENT_ARRAY_BUFFER,b4),b4._||ee.bufferData(ee.ELEMENT_ARRAY_BUFFER,se,ee.DYNAMIC_DRAW),ee.drawElements(ee.LINE_LOOP,2e4,ee.UNSIGNED_SHORT,0),b4._=!0}function x(){}function w(t,e){return t.replace(/^\s+|\s*([,\s\+\~>]|$)\s*/g,"$1").split(",").forEach(function(t){D(t,this).forEach(te.bind(e=[]))},this)||e}function D(t,e){var n,r=t.split(/[\s\>\+\~](?![\s\w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^'"]*\]|[\s\w\+\-]*\))/),i=t.match(/([\s\>\+\~])(?![\s\w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^'"]*\]|[\s\w\+\-]*\))/),o=k(r.pop()),c=[],a=[];return N.call(e,o[1]||"*").forEach(function(t){(n=C.apply(t,o))&&c.push(n)}),r.length?c.forEach(function(t){L(t,r,i)&&a.push(t)})||a:c}function L(t,e,n,r){return r=function i(t,o,c){for(;c=_e[n[o]](c,t);)if(C.apply(c,k(e[o]))&&o)return(r=i(c,o-1,c))?r:c}(t,e.length-1,t)}function C(t,e,n,r,i,o,c,t,a,t,f,u){return a&&de[a]&&!de[a](this,f)||e&&"*"!==e&&this.tag&&this.tag.toLowerCase()!==e||r&&!T(o,this[i]||"",c)||n&&(u=n.match(/#([\w\-]+)/))&&u[1]!==this.id||n&&(n.match(/\.[\w\-]+/g)||[]).some(I.bind(this))?0:this}function T(t,e,n){return e.match(RegExp({"=":n,"^=":"^"+U(n),"$=":U(n)+"$","*=":U(n),"~=":"(?:^|\\s+)"+U(n)+"(?:\\s+|$)","|=":"^"+U(n)+"(-|$)"}[t]||"adnan^"))}function k(t){return t.match(ve)}function P(t){for(;t=t.previousSibling();)if(t.top)return t}function U(t){return t.replace(/([.*+?\^=!:${}()|\[\]\/\\])/,"\\$1")}function I(t){return!RegExp("(^|\\s+)"+t.slice(1)+"(\\s+|$)").test(this.class)}function N(t){return Y(this,function(e){return"*"==t||e.tag==t},[])}function Y(t,e,n){return(t.__scene__||t.children).forEach(function(t){Y(t,e,n),e(t)&&n.push(t)})||n}function O(t){var e,n=E(t),r=this.buffer,i=this.posBuffer;if(this.indices.length<n.length)for(e=r.count+1;e<n.length+r.count;)this.indices.push(e++);else this.indices.length=n.length;r.count+=this.indices.length-n.length,this.indices.forEach(function(t,e){i[2*r[t]+t%2]=(e%2?j:H)(n[e])}),this.stroke(this.attr.stroke)}function M(t,n){var r=e.__scene__,i=r.indexOf(n);reverseEach(r.slice(i,r.push(0)),function(t,e){r[e]=r[e-1]}),r[i]=t}function $(t){return be[t.tagName.toLowerCase()](t)}function V(t){var e=this.__scene__.indexOf(t);this.__scene__.splice(e,1);for(var n=0;4>n;n++)t.buffer[t.index+n]=0;t.buffer.changed=!0,t.buffer.count-=1}function W(t){return function(n){var r=new t,i=r.buffer;e.__scene__.push(r),r.attr=Object.create(Ee),r.tag=n.tagName.toLowerCase(),r.parentNode=r.parentElement=e;var o=r.indices="line"==t.name?[i.count,i.count+1]:[4*i.count];return o.forEach(function(t){i[t]=i.count+t%2}),i.count+="line"==t.name?2:1,r}}function q(t){me[t]||(d3.select("canvas").on(t,function(){this.__scene__.filter(function(){})}),me[t]=[]),me[t].push(this.id)}function H(t){return 2*(t/e.width)-1}function j(t){return 1-2*(t/e.height)}function z(t){return G(t),y(t),B(t),x(t),re}function G(){ee.clear(ee.DEPTH_BUFFER_BIT|ee.STENCIL_BUFFER_BIT),ee.clear(ee.COLOR_BUFFER_BIT|ee.DEPTH_BUFFER_BIT|ee.STENCIL_BUFFER_BIT)}function K(){}function X(t,e){if(arguments.length>2)[].forEach.call(arguments,function(e){X(t,e)});else for(var n in e)t[n]=e[n];return t}function J(t,e,n){for(var r=t.length-1,i=0;r>i;)e.call(n,t[i++],t[i++])}function Q(){return!1}function Z(t,e){for(var n in t)e(t[n],n,t)}function te(t){return this.push(t)}var ee,ne;if(null==e&&(e=document.body.appendChild(X(document.createElement("canvas"),{height:500,width:960}))),e="string"==typeof e?document.querySelector(e):e instanceof d3.selection?e.node():e,!e)return console.log("invalid selector");if(!e.getContext)return console.log(e,"is not a valid canvas");t.vertexShader=["precision mediump float;","attribute vec4 pos;","attribute float fill;","attribute float stroke;","varying vec4 v_stroke;","varying vec4 v_fill;","varying float v_type;","vec3 unpack_color(float col) {","    if (col == 0.) return vec3(0);","    return vec3(mod(col / 256. / 256., 256.),","                mod(col / 256. , 256.),","                mod(col, 256.)) / 256.; }","void main() {","    gl_Position = vec4(pos.xy, 1., 1.);","    gl_PointSize =  2. * 10.;","    v_type = (fill > 0. ? 1. : 0.);","    v_fill = vec4(unpack_color(fill), 1.0);","    v_stroke = vec4(unpack_color(stroke), 1.0);","}"].join("\n"),t.fragmentShader=["precision mediump float;","varying vec4 v_stroke;","varying vec4 v_fill;","varying float v_type;","void main() {","    float dist = distance(gl_PointCoord, vec2(0.5));","    gl_FragColor = v_stroke;","}"].join("\n");var re=!1,ie=new Float32Array(4e4);t.uniforms={mouse:[0,0]},t.stop=function(){re=!0};var oe={m:R,z:m,l:F,h:l,v:h,c:d,s:v,q:A,t:p,a:g};window.pse=E;var ce,ae=[0,0],fe=new Uint16Array(16e4),ue=new Float32Array(16e4);fe.count=0,pb=fe,ppb=ue,cb=ie;var se=new Uint16Array(4e4),le=new Float32Array(4e4);se.count=0,lb=se,lpb=le;var he=_.once(S),de={},_e={" ":function(t){return t&&t!==__scene__&&t.parent()},">":function(t,e){return t&&t.parent()==e.parent()&&t.parent()},"~":function(t){return t&&t.previousSibling()},"+":function(t,e,n,r){return!t||(n=P(t))&&(r=P(e))&&n==r&&n}},ve=/^(\*|\w+)?(?:([\.\#]+[\w\-\.#]+)?)(\[([\w\-]+)(?:([\|\^\$\*\~]?\=)['"]?([ \w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^]+)["']?)?\])?(:([\w\-]+)(\(['"]?([^()]+)['"]?\))?)?/;d3.scale.linear().domain([0,e.width]).range([-1,1]),d3.scale.linear().domain([0,e.height]).range([1,-1]);var Ae={circle:{r:function(t){this.posBuffer[this.indices[0]+2]=t},cx:function(t){this.posBuffer[this.indices[0]+0]=H(t)},cy:function(t){this.posBuffer[this.indices[0]+1]=j(t)},fill:function(t){var e=d3.rgb(t);ie[this.indices[0]/4]=parseInt(e.toString().slice(1),16)},stroke:function(t){return},opacity:function(){},buffer:fe,posBuffer:ue},ellipse:{cx:K,cy:K,rx:K,ry:K},rect:{width:K,height:K,x:K,y:K,rx:ge,ry:ge},image:{"xlink:href":K,height:K,width:K,x:K,y:K},line:{x1:function(t){this.posBuffer[2*this.indices[0]]=H(t)},y1:function(t){this.posBuffer[2*this.indices[0]+1]=j(t)},x2:function(t){this.posBuffer[2*this.indices[1]]=H(t)},y2:function(t){this.posBuffer[2*this.indices[1]+1]=j(t)},buffer:se,posBuffer:le,stroke:function(t){var e=d3.rgb(t);this.indices.forEach(function(t){ie[t]=parseInt(e.toString().slice(1),16)})}},path:{d:O,pathLength:K,buffer:se,posBuffer:le,stroke:function(t){var e=d3.rgb(t);this.indices.forEach(function(t){ie[t]=+parseInt(e.toString().slice(1),16)}),ie[this.indices[this.indices.length-2]]=ie[this.indices[this.indices.length-1]]=16777215}},polygon:{points:K},polyline:{points:K},g:{appendChild:function(t){this.children.push($(t))},ctr:function(){this.children=[]}},text:{x:K,y:K,dx:K,dy:K}};_.each(ie,function(t,e,n){n[e]=16761035});for(var pe=X(Object.create(null),{querySelectorAll:w,children:Object.freeze([]),ctr:W,querySelector:function(t){return this.querySelectorAll(t)[0]},createElementNS:K,insertBefore:K,ownerDocument:{createElementNS:K},render:function(){this.buffer&&drawFill(this),drawStroke(this)},previousSibling:function(){e.scene[e.__scene__.indexOf(this)-1]},nextSibling:function(){e.scene[e.__scene__.indexOf()+1]},parent:function(){return __scene__},fill:function(t){Q(t)&&initShader(d3.select(t).text(),t)},transform:function(t){var e=d3.transform(t),n=e.rotate*Math.PI/180;e.rotate&&delete e.translate,X(this.attr,e,{rotation:[Math.sin(n),Math.cos(n)]})},stroke:function(t){Q(t)&&initShader(d3.select(t).text(),t)},getAttribute:function(t){return this.attr[t]},setAttribute:function(t,e){this.attr[t]=e,this[t]&&this[t](e)},style:{setProperty:K},removeAttribute:function(t){delete this.attr[t]},textContent:K,removeEventListener:K,addEventListener:q}),ge=K,be=[function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}].reduce(function(t,e){return t[e.name]=W(e),e.prototype=X(Object.create(pe),Ae[e.name]),t},{}),Ee={rotation:[0,1],translate:[0,0],scale:[1,1],fill:0,stroke:0,"stroke-width":2,cx:0,cy:0,x:0,y:0,opacity:.999},Re=0;Re<se.length;Re+=2)se[Re]=Re/2,se[Re+1]=Re/2;var me={},Fe=(Date.now(),{});return t.frameCounter=Fe,t.xScale=H,t.yScale=j,n(e)}this.pathgl=t,t.stop=d3.functor()}();