!function(){function t(e){function n(t){return+parseInt(j(t).toString().slice(1),16)}function r(t,e){if(W=V.createProgram(),t=o(V.VERTEX_SHADER,t),e=o(V.FRAGMENT_SHADER,e),V.attachShader(W,t),V.attachShader(W,e),V.deleteShader(t),V.deleteShader(e),V.bindAttribLocation(W,0,"pos"),V.bindAttribLocation(W,1,"fill"),V.bindAttribLocation(W,2,"stroke"),V.linkProgram(W),V.useProgram(W),W.pos=0,W.fill=1,W.stroke=2,!V.getProgramParameter(W,V.LINK_STATUS))throw name+": "+V.getProgramInfoLog(W);return z({type:[0],mouse:[0,0],dates:[0,0],resolution:[0,0],clock:[0]},c),W}function i(e){z(e,function(t,e,n){"cx"==e&&(n.x=t),"cy"==e&&(n.y=t)});var n=$({stroke:"vec4(unpack_color(stroke), 1.);",radius:"2. * pos.z;",x:"pos.x;",y:"pos.y;"},e),i=t.vertexShader;for(var o in n)i=i.replace("replace_"+o,n[o]);return r(i,t.fragmentShader)}function o(t,e){var n=V.createShader(t);if(V.shaderSource(n,e),V.compileShader(n),!V.getShaderParameter(n,V.COMPILE_STATUS))throw e+" "+V.getShaderInfoLog(n);return n}function c(t,e){var n,r=V.getUniformLocation(W,e);(W[e]=function(e){if(n!=e){if(null==e)return n;V["uniform"+t.length+"fv"](r,Array.isArray(e)?e:[e]),n=e}})(t)}function u(t){if(!(V=h(e=t)))return console.log("webGL context could not be initialized")||null;W=i(),l(e),a(e),f(e);var n=Date.now();return H(function r(){P(new Date-n),H(r)}),e}function f(){V.disable(V.SCISSOR_TEST),V.stencilMask(1,1,1,1),V.clear(V.COLOR_BUFFER_BIT),V.colorMask(!0,!0,!0,!0),V.disable(V.BLEND),V.enable(V.CULL_FACE)}function a(e){setInterval(function(){t.uniform("resolution",[e.width,e.height])},50),e.addEventListener("mousemove",s),e.addEventListener("touchmove",s),e.addEventListener("touchstart",s)}function s(n){var r=e.getBoundingClientRect();t.uniform("mouse",[n.clientX-r.left-e.clientLeft,n.clientY-r.top-e.clientTop])}function l(t){return $(t,{appendChild:O,querySelectorAll:b,querySelector:function(t){return this.querySelectorAll(t)[0]},removeChild:T,insertBefore:D,gl:V,__scene__:[],__pos__:[],__program__:void 0})}function h(t){var e=t.getContext("webgl")||t.getContext("experimental-webgl");return e&&$(e,{viewportWidth:t.width,viewportHeight:t.height})}function d(t){var e=[],n=this.buffer,r=this.posBuffer,i=this.indices,o=[0,0],c=i.length,u=0,f=[0,0];for(t.match(/[a-z][^a-z]*/gi).forEach(function(t){for(var n=t.slice(1).trim().split(/,| /g),r=t[0].toLowerCase(),i=0;i<n.length;){var c=n[i++],u=n[i++];"m"==r?f=o=[c,u]:"l"==r?e.push(o[0],o[1],c,u)&&(o=[c,u]):"z"==r?e.push(o[0],o[1],f[0],f[1])&&(o=f):console.log("%d method is not supported malformed path:",r)}});i.length<e.length;)i.push(n.count+u++);i.length>e.length&&(i.length=e.length),i.forEach(function(t,i){r[3*n[t]+t%3]=i<e.length&&e[i]}),n.count+=e.length-c}function p(){var t=d3.selectAll("style")[0].map(function(){return this.sheet}).reduce(function(t,e){var n={};return z(e.cssRules,function(t){for(var e=t.length,r={};e--;){var i=t[t[e]];r[i]=t[i]}n[t.selectorText]=r}),$(t,n)},{});z(t,function(t,e){d3.select(e).attr(t)})}function m(){X=V.createBuffer(),K=V.createBuffer(),J=V.createBuffer(),Q=V.createBuffer()}function _(){X||m(),e.pb;var n=e.ppb;le&&(se&&(V.bindBuffer(V.ARRAY_BUFFER,X),V.bufferData(V.ARRAY_BUFFER,n,V.DYNAMIC_DRAW),V.vertexAttribPointer(W.pos,4,V.FLOAT,!1,0,0),V.enableVertexAttribArray(W.pos),V.bindBuffer(V.ARRAY_BUFFER,K),V.bufferData(V.ARRAY_BUFFER,ae,V.DYNAMIC_DRAW),V.vertexAttribPointer(W.fill,1,V.FLOAT,!1,0,0),V.enableVertexAttribArray(W.fill),V.bindBuffer(V.ARRAY_BUFFER,J),V.bufferData(V.ARRAY_BUFFER,ae,V.DYNAMIC_DRAW),V.vertexAttribPointer(W.stroke,1,V.FLOAT,!1,0,0),V.enableVertexAttribArray(W.stroke),t.uniform("type",1),se=!1),V.drawArrays(V.POINTS,0,le))}function v(){Z=V.createBuffer(),te=V.createBuffer(),ee=V.createBuffer(),ne=V.createBuffer()}function g(){Z||v(),he&&(de&&(V.bindBuffer(V.ARRAY_BUFFER,Z),V.bufferData(V.ARRAY_BUFFER,ie,V.DYNAMIC_DRAW),V.vertexAttribPointer(W.pos,2,V.FLOAT,!1,0,0),V.enableVertexAttribArray(W.pos),V.bindBuffer(V.ARRAY_BUFFER,te),V.bufferData(V.ARRAY_BUFFER,ae,V.DYNAMIC_DRAW),V.vertexAttribPointer(W.fill,1,V.FLOAT,!1,0,0),V.enableVertexAttribArray(W.fill),V.bindBuffer(V.ARRAY_BUFFER,ee),V.bufferData(V.ARRAY_BUFFER,ae,V.DYNAMIC_DRAW),V.vertexAttribPointer(W.stroke,1,V.FLOAT,!1,0,0),V.enableVertexAttribArray(W.stroke),t.uniform("type",0),de=!1),V.drawArrays(V.LINES,0,he))}function A(){}function b(t,e){return t.replace(/^\s+|\s*([,\s\+\~>]|$)\s*/g,"$1").split(",").forEach(function(t){y(t,this).forEach(M.bind(e=[]))},this)||e}function y(t,e){var n,r=t.split(/[\s\>\+\~](?![\s\w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^'"]*\]|[\s\w\+\-]*\))/),i=t.match(/([\s\>\+\~])(?![\s\w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^'"]*\]|[\s\w\+\-]*\))/),o=S(r.pop()),c=[],u=[];return k.call(e,o[1]||"*").forEach(function(t){(n=R.apply(t,o))&&c.push(n)}),r.length?c.forEach(function(t){x(t,r,i)&&u.push(t)})||u:c}function x(t,e,n,r){return r=function i(t,o,c){for(;c=ce[n[o]](c,t);)if(R.apply(c,S(e[o]))&&o)return(r=i(c,o-1,c))?r:c}(t,e.length-1,t)}function R(t,e,n,r,i,o,c,t,u,t,f,a){return u&&oe[u]&&!oe[u](this,f)||e&&"*"!==e&&this.tag&&this.tag.toLowerCase()!==e||r&&!w(o,this[i]||"",c)||n&&(a=n.match(/#([\w\-]+)/))&&a[1]!==this.id||n&&(n.match(/\.[\w\-]+/g)||[]).some(F.bind(this))?0:this}function w(t,e,n){return e.match(RegExp({"=":n,"^=":"^"+E(n),"$=":E(n)+"$","*=":E(n),"~=":"(?:^|\\s+)"+E(n)+"(?:\\s+|$)","|=":"^"+E(n)+"(-|$)"}[t]||"adnan^"))}function S(t){return t.match(ue)}function B(t){for(;t=t.previousSibling();)if(t.top)return t}function E(t){return t.replace(/([.*+?\^=!:${}()|\[\]\/\\])/,"\\$1")}function F(t){return!RegExp("(^|\\s+)"+t.slice(1)+"(\\s+|$)").test(this.class)}function k(t){return L(this,function(e){return"*"==t||e.tag==t},[])}function L(t,e,n){return(t.__scene__||t.children).forEach(function(t){L(t,e,n),e(t)&&n.push(t)})||n}function C(t){d.call(this,t,this.stroke(this.attr.stroke)),this.stroke(this.attr.stroke)}function D(t,n){var r=e.__scene__,i=r.indexOf(n);reverseEach(r.slice(i,r.push(0)),function(t,e){r[e]=r[e-1]}),r[i]=t}function O(t){return ve[t.tagName.toLowerCase()](t)}function T(t){var e=this.__scene__.indexOf(t);this.__scene__.splice(e,1);for(var n=0;4>n;n++)t.buffer[t.index+n]=0}function U(t){return function(n){var r=new t,i=r.buffer,o=e.__scene__.push(r)-1;r.attr=Object.create(ge),r.tag=n.tagName.toLowerCase(),r.parentNode=r.parentElement=e;var c=r.indices="line"==t.name?[o,o+1]:"circle"==t.name?[4*o]:[];return c.forEach(function(t){i[t]=o+t%2}),"path"!==t.name&&(o+="line"==t.name?2:1),"line"==t.name&&(he+=1),window.lc=he,window.cb=ae,"circle"==t.name&&(le+=1),r}}function I(){}function P(e){return Y(),t.uniform("clock",e),_(e),g(e),A(e),G&&Y()}function Y(){V.clear(V.COLOR_BUFFER_BIT)}function N(){}function $(t,e){if(arguments.length>2)[].forEach.call(arguments,function(e){$(t,e)});else for(var n in e)t[n]=e[n];return t}function q(){return!1}function z(t,e){for(var n in t)e(t[n],n,t)}function M(t){return this.push(t)}var V,W;if(null==e&&(e=document.body.appendChild($(document.createElement("canvas"),{height:500,width:960}))),e="string"==typeof e?document.querySelector(e):e instanceof d3.selection?e.node():e,!e)return console.log("invalid selector");if(!e.getContext)return console.log(e,"is not a valid canvas");var j=function(t){return d3.rgb(t)};t.vertexShader=["precision mediump float;","uniform float type;","uniform float clock;","uniform vec2 mouse;","uniform vec2 resolution;","uniform vec2 dates;","attribute vec4 pos;","attribute float fill;","attribute float stroke;","varying vec4 v_stroke;","varying vec4 v_fill;","vec3 unpack_color(float col) {","    if (col == 0.) return vec3(0);","    return vec3(mod(col / 256. / 256., 256.),","                mod(col / 256. , 256.),","                mod(col, 256.)) / 256.; }","void main() {","    float x = replace_x;","    float y = replace_y;","    gl_Position = vec4(2. * (x / resolution.x) - 1., 1. - ((y / resolution.y) * 2.),  1., 1.);","    gl_PointSize =  replace_radius;","    v_fill = vec4(unpack_color(fill), 1.);","    v_stroke = replace_stroke;","}"].join("\n"),t.fragmentShader=["precision mediump float;","uniform float type;","varying vec4 v_stroke;","varying vec4 v_fill;","void main() {","    float dist = distance(gl_PointCoord, vec2(0.5));","    if (type == 1. && dist > 0.5) discard;","    gl_FragColor = v_stroke;","}"].join("\n"),d3&&(d3.selection.prototype.pAttr=function(t){return this.each(function(e){for(var n in t)this.posBuffer[this.indices[0]+this.schema.indexOf(n)]=t[n](e)}),se=!0,this},d3.selection.prototype.shader=function(t,e){if(2==arguments.length){var n={};n[t]=e}return i(n||t),this});var H=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),G=!1;t.stop=function(){G=!0},t.uniform=function(t,e){return W[t]?W[t](e):void 0},t.applyCSS=p;for(var X,K,J,Q,Z,te,ee,ne,re=new Uint16Array(4e4),ie=new Float32Array(4e4),oe={},ce={" ":function(t){return t&&t!==__scene__&&t.parent()},">":function(t,e){return t&&t.parent()==e.parent()&&t.parent()},"~":function(t){return t&&t.previousSibling()},"+":function(t,e,n,r){return!t||(n=B(t))&&(r=B(e))&&n==r&&n}},ue=/^(\*|\w+)?(?:([\.\#]+[\w\-\.#]+)?)(\[([\w\-]+)(?:([\|\^\$\*\~]?\=)['"]?([ \w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^]+)["']?)?\])?(:([\w\-]+)(\(['"]?([^()]+)['"]?\))?)?/,fe=8e5,ae=new Float32Array(fe),se=!0,le=0,he=0,de=!0,pe={circle:{r:function(t){this.posBuffer[this.indices[0]+2]=t},cx:function(t){this.posBuffer[this.indices[0]+0]=t},cy:function(t){this.posBuffer[this.indices[0]+1]=t},cz:function(t){this.posBuffer[this.indices[0]+3]=t},fill:function(t){ae[this.indices[0]/4]=n(t)},stroke:function(t){},opacity:function(){},buffer:e.pb=e.pb||new Uint16Array(fe),posBuffer:e.ppb=e.ppb||new Float32Array(fe),schema:["cx","cy","r","cz"]},ellipse:{cx:N,cy:N,rx:N,ry:N},rect:{width:N,height:N,x:N,y:N,rx:_e,ry:_e},image:{"xlink:href":N,height:N,width:N,x:N,y:N},line:{x1:function(t){this.posBuffer[2*this.indices[0]]=t},y1:function(t){this.posBuffer[2*this.indices[0]+1]=t},x2:function(t){this.posBuffer[2*this.indices[1]]=t},y2:function(t){this.posBuffer[2*this.indices[1]+1]=t},buffer:re,posBuffer:ie,stroke:function(t){var e=n(t);this.indices.forEach(function(t){ae[t]=parseInt(e.toString().slice(1),16)})}},path:{d:C,pathLength:N,buffer:re,posBuffer:ie,stroke:function(t){var e=n(t);this.indices.forEach(function(t){ae[t/2]=+parseInt(e.toString().slice(1),16)})}},polygon:{points:N},polyline:{points:N},g:{appendChild:function(t){this.children.push(O(t))},ctr:function(){this.children=[]}},text:{x:N,y:N,dx:N,dy:N}},me=$(Object.create(null),{querySelectorAll:b,children:Object.freeze([]),ctr:U,querySelector:function(t){return this.querySelectorAll(t)[0]},createElementNS:N,insertBefore:N,ownerDocument:{createElementNS:N},render:function(){this.buffer&&drawFill(this),drawStroke(this)},previousSibling:function(){e.scene[e.__scene__.indexOf(this)-1]},nextSibling:function(){e.scene[e.__scene__.indexOf()+1]},parent:function(){return __scene__},fill:function(t){q(t)&&initShader(document.querySelector(t).textContent,t)},transform:function(){},stroke:function(t){q(t)&&initShader(document.querySelector(t).textContent,t)},getAttribute:function(t){return this.attr[t]},setAttribute:function(t,e){se=!0,de=!0,this.attr[t]=e,this[t]&&this[t](e)},style:{setProperty:N},removeAttribute:function(t){delete this.attr[t]},textContent:N,removeEventListener:N,addEventListener:I}),_e=N,ve=[function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}].reduce(function(t,e){return t[e.name]=U(e),e.prototype=$(Object.create(me),pe[e.name]),t},{}),ge={rotation:[0,1],translate:[0,0],scale:[1,1],fill:0,stroke:0,"stroke-width":2,cx:0,cy:0,x:0,y:0,opacity:.999},Ae=0;Ae<re.length;Ae+=3)re[Ae]=Ae/3,re[Ae+1]=Ae/3,re[Ae+2]=Ae/3;var be=(Date.now(),{});return t.frameCounter=be,console.log.bind(console),u(e)}this.pathgl=t,t.stop=function(){},t.context=function(){},t.uniform=function(){},t.texture=function(){}}();