!function(){function e(){}function t(e){return e}function n(e){return[].push.call(this,e)}function r(e){return e&&!(e&e-1)}function i(e){return Math.pow(Math.ceil(Math.sqrt(e)),2)}function o(e,t){for(var n in e)t(e[n],n,e)}function a(){return[-1,-1,1,-1,-1,1,1,1]}function s(e){return e.split(".").pop().join().match(/mp4|ogg|webm/)}function u(e){return e.reduce(function(e,t){return e.concat(t)},[])}function c(){return r(this.height)&&r(this.width)&&(this.data||{}).constructor!==HTMLVideoElement&&this.data}function l(e,t){if(arguments.length>2)[].forEach.call(arguments,function(t){l(e,t)});else for(var n in t)e[n]=t[n];return e}function f(e,t){!e||e.complete||4==e.readyState?t():e.addEventListener&&e.addEventListener("load",t)}function h(e){var t=g(e);return+(255*t[0])<<16^255*t[1]<<8^255*t[2]<<0}function d(e){return e=Math.floor(e),[(255&e>>16)/255,(255&e>>8)/255,(255&e)/255]}function p(e,t,n){if(0===t)return[n,n,n];var r=.5>=n?n*(1+t):n+t-n*t,i=2*n-r;return[m(i,r,e+1/3),m(i,r,e),m(i,r,e-1/3)]}function m(e,t,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?e+6*(t-e)*n:.5>n?t:2/3>n?e+6*(t-e)*(2/3-n):e}function g(e){if(kt[e])return d(kt[e]);if(/^hsl/i.test(e)){var t=e.split(/,|\(/).map(parseFloat);return p(t[1]/360,t[2]/100,t[3]/100)}if(/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(e)){var n=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(e);return[Math.min(255,parseInt(n[1],10))/255,Math.min(255,parseInt(n[2],10))/255,Math.min(255,parseInt(n[3],10))/255]}if(/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(e)){var n=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(e);return[Math.min(100,parseInt(n[1],10))/100,Math.min(100,parseInt(n[2],10))/100,Math.min(100,parseInt(n[3],10))/100]}if(/^\#([0-9a-f]{6})$/i.test(e)){var n=/^\#([0-9a-f]{6})$/i.exec(e);return d(parseInt(n[1],16))}if(/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(e)){var n=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(e);return d(parseInt(n[1]+n[1]+n[2]+n[2]+n[3]+n[3],16))}return!1}function v(){function e(){for(var e=-1;++e<u;)f.update()}function t(){}function n(){}function r(){}function i(){return f.mergeProgram(zt,Mt),this}function o(){yt.push(e),c.forEach(function(e){e.invalidate()})}function a(e){var t=e().shared("uv","tex1.xy").map("gl_fragcolor = texel(uv);").pipe(c),n=e().sort("float comparator(vec2 a, vec2 b) { return a > b ? a : b }").map("bsearch").pipe(t),r="void main (){float a = texel(uv);float maxC = max(a.r, a.g, a.b)float minC = min(a.r, a.g, a.b)float lightness = (maxC + minC) * .5float  delta = maxC - minCfloat saturation = lightness <= 0.5 ? delta / ( maxC + minC ) : delta / ( 2 - maxC - minC )float hue = maxC == a.r ?  (a.g - a.b ) / delta + ( a.g < a.b ? 6 : 0 ): maxC == a.g  ? ( a.b - a.r ) / delta + 2: ( a.r - a.g ) / delta + 4;hue /= 6gl_FragColor = vec3(hue, saturation, threadIdx.xy);}";return dependencies.map(function(i){var o=e().blocksize(64,64).gridsize(8,8).map(r).reduce(e).pipe(n);i.pipe(o),i[1].pipe(t)}),this}function s(e){return f.drawTo(e),e&&c.push(e),l}var u=3,c=[],l={scatter:t,reduce:r,scan:n,map:i,match:a,pipe:s,invalidate:o},f=U({gl:_t,mesh:y()});return l}function y(){return P(_t,{pos:{array:a(),size:2},attrList:["pos"],count:4,primitive:"triangle_strip"})}function _(e,t,n,r){function i(t,n){var r,i=e.getUniformLocation(xt,t),o="uniform"+w(n)+"fv";xt[t]=function(t){r!=t&&arguments.length&&(e[o](i,Array.isArray(t)?t:[t]),r=t)}}var o=t+"\n"+n;xt=e.createProgram(),xt.shit=Math.random(0);var a=b(e,e.VERTEX_SHADER,t),s=b(e,e.FRAGMENT_SHADER,n);if(e.attachShader(xt,a),e.attachShader(xt,s),e.deleteShader(a),e.deleteShader(s),(r||["pos","color","fugue"]).forEach(function(t,n){e.bindAttribLocation(xt,n,t)}),e.linkProgram(xt),e.useProgram(xt),!e.getProgramParameter(xt,e.LINK_STATUS))throw name+": "+e.getProgramInfoLog(xt);for(var u=/uniform\s+(\S+)\s+(\S+)\s*;/g,c=null;null!=(c=u.exec(o));)i(c[2],c[1]);return xt.merge=E(a,s),xt.gl=e,xt}function x(e,t){o(t||{},function(e,t,n){"cx"==t&&(n.x=e),"cy"==t&&(n.y=e)});var n=l({stroke:"(color.r < 0.) ? vec4(stroke) : unpack_color(stroke)",r:"(pos.z < 0.) ? max(texel(pos.xy).w + texel(pos.xy).z, 1.) : (2. * pos.z)",x:"(pos.x < 1.) ? texel(pos.xy).x * resolution.x : pos.x",y:"(pos.y < 1.) ? texel(pos.xy).y * resolution.y : pos.y"},t);for(var r in n)e=e.replace("replace_"+r,n[r]);return e}function b(e,t,n){var r="precision mediump float;\n",i=e.createShader(t);if(e.shaderSource(i,r+n),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS)){var o=e.getShaderInfoLog(i)||"",a=+o.split(":")[2];return console.error((n||"").split("\n").slice(a-5,a+5).join("\n"),o)}return i}function w(e){return e.match("vec")?e[e.length-1]:1}function E(){return function(e,t,n){return t=t||mt.fragmentShader,e=x(e,n),_(this.gl,e,t)}}function T(e){if(!(_t=C(canvas=e)))return!!console.log("webGL context could not be initialized");_t.getExtension("OES_texture_float")||console.warn("does not support floating point textures"),xt=_(_t,x(mt.vertexShader),mt.fragmentShader),canvas.program=xt,B(canvas),A(canvas);var t=U(canvas);return t.drawTo(null),bt.push(t.update),_t.clearColor(.3,.3,.3,1),k(_t),N(),bt.push(function(){mt.uniform("clock",new Date-Et)}),canvas}function k(e){e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE),e.blendColor(1,1,1,1)}function A(e){function t(){mt.uniform("resolution",[e.width||960,e.height||500])}setInterval(t,100),e.addEventListener("click",R),e.addEventListener("mousemove",S),e.addEventListener("touchmove",F),e.addEventListener("touchstart",F)}function R(){}function S(e){var t=canvas.getBoundingClientRect();mt.uniform("mouse",[e.clientX-t.left-canvas.clientLeft,e.clientY-t.top-canvas.clientTop])}function F(e){var t=canvas.getBoundingClientRect();e=e.touches[0],mt.uniform("mouse",[e.clientX-t.left-canvas.clientLeft,e.clientY-t.top-canvas.clientTop])}function B(e){window.d3&&l(window.d3.selection.prototype,{vAttr:I,shader:D}),window.d3&&l(window.d3.transition.prototype,{vAttr:I,shader:D}),l(e,At).gl=_t}function C(e){var t=e.getContext("webgl")||e.getContext("experimental-webgl");return t&&l(t,{viewportWidth:e.width,viewportHeight:e.height})}function I(e,t){return this.each(function(e,n){this.colorBuffer[this.indices[0]]=h(t(e,n))}),this}function D(e){return this.node().mesh.mergeProgram(mt.vertexShader,mt.fragmentShader,e),this}function N(){for(var e,t=bt.length;t--;)bt[t]();for(e=yt,yt=[],St=e;St.length;)St.pop()();Rt(N)}function z(e){var t=[],n=[0,0],r=[0,0];e.match(/[a-z][^a-z]*/gi).forEach(function(e){for(var i=e.slice(1).trim().split(/,| /g),o=e[0].toLowerCase(),a=0;a<i.length;){var s=i[a++],u=i[a++];"m"==o?r=n=[s,u]:"l"==o?t.push(n,[s,u])&&(n=[s,u]):"z"==o?t.push(n,[r[0],r[1]])&&(n=r):console.log("%d method is not supported malformed path:",o)}}),t=L(t),this.posBuffer.set(t,0),this.indices=t.map(function(e,t){return t})}function M(){if(!d3)return console.warn("this method depends on d3");d3.selectAll("link[rel=styleSheet]").each(function(){d3.text});var e=d3.selectAll("style")[0].map(function(){return this.sheet}).reduce(function(e,t){var n={};return o(t.cssRules,function(e){for(var t=e.length,r={};t--;){var i=e[e[t]];r[i]=e[i]}n[e.selectorText]=r}),l(e,n)},{});o(e,function(e,t){d3.select(t).attr(e)})}function L(e){return u(e)}function P(e,t){function n(){return d+="points"==t.primitive?1:"lines"==t.primitive?2:3}function r(){p.forEach(function(n,r){var i=e.createBuffer(),o=t[n]||{};e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,4e7,e.STREAM_DRAW),h[n]={array:new Float32Array(t[n]&&t[n].array||4e5),buffer:i,size:o.size||4,changed:!0,loc:r}})}function i(e){var t,n;for(n in h)for(n=h,t=n.size;t--;)h[e*n.size+t]=0}function o(e){e.posBuffer=h.pos.array,e.fBuffer=h.fugue.array,e.colorBuffer=h.color.array,e.mesh=this}function a(t){if(d){for(var n in h)n=h[n],e.bindBuffer(e.ARRAY_BUFFER,n.buffer),e.vertexAttribPointer(n.loc,n.size,e.FLOAT,!1,0,0),e.enableVertexAttribArray(n.loc),n.changed&&e.bufferSubData(e.ARRAY_BUFFER,0,n.array);e.drawArrays(m,t,1e5)}}function s(){}function u(){}function c(){}function l(){}function f(e,t){~g.indexOf(t)||g.push(t)}var h={},d=t.count||0,p=t.attrList||["pos","color","fugue"],m=e[t.primitive.toUpperCase()],g=[];return r(),{init:r,free:i,alloc:n,draw:a,bind:o,bindMaterial:f,attributes:h,set:s,addAttr:u,removeAttr:c,boundingBox:l}}function U(e){function t(t){return t?(u.push(O(t)),e.width=t.width,e.height=t.height,void 0):u.push(null)}function n(e){return(l[e.toLowerCase()]||console.log.bind(console,"oops"))(e)}function r(e,t,n){c=c.merge(e,t,n)}function i(){xt!=c&&s.useProgram(xt=c);for(var t=-1;++t<u.length;){s.bindFramebuffer(s.FRAMEBUFFER,u[t]),o(),a(s,e);for(var n=-1;++n<f.length;)f[n].draw()}}function o(){for(var e in wt)xt[e]&&xt[e](wt[e])}function a(e,t){t==e.canvas&&e.clear(e.COLOR_BUFFER_BIT),e.viewport(0,0,t.width,t.height)}var s=e.gl,u=[],c=e.program||xt,l=e.types=et(),f=e.mesh?[e.mesh]:q(s,e.types);return f.forEach(function(e){e.mergeProgram=r}),e.__renderTarget__={update:i,append:n,drawTo:t,mergeProgram:r}}function q(e,t){var n=new P(e,{primitive:"points"});n.bind(t.circle),n.bind(t.rect);var r=new P(e,{primitive:"lines",pos:{size:1}});r.bind(t.line);var i=new P(e,{primitive:"lines",pos:{size:2}});return i.bind(t.path),[n,r,i]}function O(e){var t=_t.createFramebuffer();return _t.bindFramebuffer(_t.FRAMEBUFFER,t),t.width=e.width,t.height=e.height,_t.framebufferTexture2D(_t.FRAMEBUFFER,_t.COLOR_ATTACHMENT0,_t.TEXTURE_2D,e.texture,null),_t.bindFramebuffer(_t.FRAMEBUFFER,null),t}function $(e){return this.querySelectorAll(e)[0]}function G(e,t){return e.replace(/^\s+|\s*([,\s\+\~>]|$)\s*/g,"$1").split(",").forEach(function(e){X(e,this).forEach(n.bind(t=[]))},this)||t}function X(e,t){var n,r=e.split(/[\s\>\+\~](?![\s\w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^'"]*\]|[\s\w\+\-]*\))/),i=e.match(/([\s\>\+\~])(?![\s\w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^'"]*\]|[\s\w\+\-]*\))/),o=H(r.pop()),a=[],s=[];return Q.call(t,o[1]||"*").forEach(function(e){(n=Y.apply(e,o))&&a.push(n)}),r.length?a.forEach(function(e){j(e,r,i)&&s.push(e)})||s:a}function j(e,t,n,r){return r=function i(e,o,a){for(;a=Bt[n[o]](a,e);)if(Y.apply(a,H(t[o]))&&o)return(r=i(a,o-1,a))?r:a}(e,t.length-1,e)}function Y(e,t,n,r,i,o,a,e,s,e,u,c){return s&&Ft[s]&&!Ft[s](this,u)||t&&"*"!==t&&this.tag&&this.tag.toLowerCase()!==t||r&&!V(o,this.attr[i]||"",a)||n&&(c=n.match(/#([\w\-]+)/))&&c[1]!==this.attr.id||n&&(n.match(/\.[\w\-]+/g)||[]).some(J.bind(this))?0:this}function V(e,t,n){return t.match(RegExp({"=":n,"^=":"^"+K(n),"$=":K(n)+"$","*=":K(n),"~=":"(?:^|\\s+)"+K(n)+"(?:\\s+|$)","|=":"^"+K(n)+"(-|$)"}[e]||"adnan^"))}function H(e){return e.match(Ct)}function W(e){for(;e=e.previousSibling();)if(e.top)return e}function K(e){return e.replace(/([.*+?\^=!:${}()|\[\]\/\\])/,"\\$1")}function J(e){return!RegExp("(^|\\s+)"+e.slice(1)+"(\\s+|$)").test(this.attr.class)}function Q(e){return Z(this,function(t){return"*"==e||t.tagName==e},[])}function Z(e,t,n){return(e.__scene__||e.children).forEach(function(e){Z(e,t,n),t(e)&&n.push(e)})||n}function et(){return Nt.reduce(function(e,t){return e[t.name]=function n(){var e=Object.create(t.prototype);return l(e,n),e.init(n.mesh.alloc()-1),e.attr={},e},l(t.prototype,Dt,It[t.name]),e},{})}function tt(e){z.call(this,e,this.stroke(this.attr.stroke)),this.stroke(this.attr.stroke)}function nt(e,t){var n=canvas.__scene__,r=n.indexOf(t);reverseEach(n.slice(r,n.push(0)),function(e,t){n[t]=n[t-1]}),n[r]=e}function rt(e){return this.__scene__[this.__scene__.length]=this.__renderTarget__.append(e.tagName)}function it(e){var t=this.__scene__.indexOf(e);e=this.__scene__.splice(t,1)[0],e&&e.mesh.free(t)}function ot(e){this.width=e.width||512,this.height=e.height||512,"string"==typeof e&&(e=st(e)),"number"==typeof e&&(this.width=this.height=Math.sqrt(e),e=!1),l(this,{gl:_t,id:gt(),data:e,dependents:[],texture:_t.createTexture(),invalidate:function(){yt.push(function(){this.forEach(function(e){e.invalidate()})}.bind(this.dependents))}}),Array.isArray(e)&&(this.data=ft.call(this)),e.constructor==Object&&(e=ht(e)),dt.call(this)}function at(){var e=c.call(this),t=_t[e?"REPEAT":"CLAMP_TO_EDGE"],n=_t[e?"LINEAR":"NEAREST"];_t.bindTexture(_t.TEXTURE_2D,this.texture),_t.pixelStorei(_t.UNPACK_FLIP_Y_WEBGL,!0),_t.texParameteri(_t.TEXTURE_2D,_t.TEXTURE_MAG_FILTER,n),_t.texParameteri(_t.TEXTURE_2D,_t.TEXTURE_MIN_FILTER,n),_t.texParameteri(_t.TEXTURE_2D,_t.TEXTURE_WRAP_S,t),_t.texParameteri(_t.TEXTURE_2D,_t.TEXTURE_WRAP_T,t),this.update()}function st(e){try{var t=document.querySelector(e);if(t)return t}catch(n){}return l(s?new Image:document.createElement("video"),{crossOrigin:"anonymous",src:e})}function ut(e){return this.dependents.push(e),this}function ct(){for(var e=this.size()||0,t=new Array(e);e--;)t[e]={x:this.x()(e,e),y:this.y()(e,e),z:this.z()(e,e)};return t}function lt(){l(this,{__scene__:[]})(this.__renderTarget__=U(this)).drawTo(this);var e=this.update;this.update=function(){e.call(this),this.__renderTarget__.update()}}function ft(){var e=this.data,t=e.rows,n=e.width,r=this.update.bind(this),i=document.createElement("canvas").getContext("2d"),o=n/t;return i.canvas.width=i.canvas.height=n,e.forEach(function(n,a){var s=st(e[a]),u=o*(a%t),c=o*~~(a/t);f(s,function(){i.drawImage(s,u,c,o,o),r()})},this),i.canvas}function ht(e){var t=new Float32Array(1024),n=0;for(var r in e){for(var i in e[r])t[n++]=e[r][i];n>1020&&(this.subImage(0,n,t),t=new Float32Array(1024))}}function dt(){var e=this.data;return at.call(this),this.update(Tt),f(e,this.update.bind(this)),this}function pt(e,t){return Math.random()*(t-e)}var mt=this.pathgl={};mt.sim={},mt.stop=function(){},mt.context=function(){return _t};var gt=function(e){return function(){return e++}}(1),vt=0,yt=[];mt.texture=function(e){return vt||mt.init("canvas"),new ot(e||!1)},mt.uniform=function(e,t){return 1==arguments.length?wt[e]:wt[e]=t},mt.applyCSS=M,HTMLCanvasElement.prototype.appendChild=function(e){return mt.init(this)?this.appendChild(e):void 0};var _t,xt,bt=[],wt={},Et=Date.now();mt.init=function(e){return vt=1,e="string"==typeof e?document.querySelector(e):e instanceof d3.selection?e.node():e,e.getContext?!!T(e):console.log(e,"is not a valid canvas")};var Tt=function(){var e,t,n=document.createElement("canvas").getContext("2d"),r=n.canvas.width=n.canvas.height=128;for(e=0;r>e;e+=16)for(t=0;r>t;t+=16)n.fillStyle=16&(t^e)?"#FFF":"#DDD",n.fillRect(t,e,16,16);return n.canvas}();!function(){"use strict";function e(e){var t,n,r,i,o,a,s=Number.POSITIVE_INFINITY,u=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;for(t=e.length;t--;)e[t][0]<s&&(s=e[t][0]),e[t][0]>c&&(c=e[t][0]),e[t][1]<u&&(u=e[t][1]),e[t][1]>l&&(l=e[t][1]);return n=c-s,r=l-u,i=Math.max(n,r),o=s+.5*n,a=u+.5*r,[[o-20*i,a-i],[o,a+20*i],[o+20*i,a-i]]}function t(e,t,n,i){var o,a,s,u,c,l,f,h,d,p,m=e[t][0],g=e[t][1],v=e[n][0],y=e[n][1],_=e[i][0],x=e[i][1],b=Math.abs(g-y),w=Math.abs(y-x);if(r>b&&r>w)throw new Error("Eek! Coincident points!");return r>b?(u=-((_-v)/(x-y)),l=(v+_)/2,h=(y+x)/2,o=(v+m)/2,a=u*(o-l)+h):r>w?(s=-((v-m)/(y-g)),c=(m+v)/2,f=(g+y)/2,o=(_+v)/2,a=s*(o-c)+f):(s=-((v-m)/(y-g)),u=-((_-v)/(x-y)),c=(m+v)/2,l=(v+_)/2,f=(g+y)/2,h=(y+x)/2,o=(s*c-u*l+h-f)/(s-u),a=b>w?s*(o-c)+f:u*(o-l)+h),d=v-o,p=y-a,{i:t,j:n,k:i,x:o,y:a,r:d*d+p*p}}function n(e){var t,n,r,i,o,a;for(n=e.length;n;)for(i=e[--n],r=e[--n],t=n;t;)if(a=e[--t],o=e[--t],r===o&&i===a||r===a&&i===o){e.splice(n,2),e.splice(t,2);break}}var r=1/1048576;window.Delaunay={triangulate:function(i,o){var a,s,u,c,l,f,h,d,p,m,g,v,y=i.length;if(3>y)return[];if(i=i.slice(0),o)for(a=y;a--;)i[a]=i[a][o];for(u=new Array(y),a=y;a--;)u[a]=a;for(u.sort(function(e,t){return i[t][0]-i[e][0]}),c=e(i),i.push(c[0],c[1],c[2]),l=[t(i,y+0,y+1,y+2)],f=[],h=[],a=u.length;a--;h.length=0){for(v=u[a],s=l.length;s--;)d=i[v][0]-l[s].x,d>0&&d*d>l[s].r?(f.push(l[s]),l.splice(s,1)):(p=i[v][1]-l[s].y,d*d+p*p-l[s].r>r||(h.push(l[s].i,l[s].j,l[s].j,l[s].k,l[s].k,l[s].i),l.splice(s,1)));for(n(h),s=h.length;s;)g=h[--s],m=h[--s],l.push(t(i,m,g,v))}for(a=l.length;a--;)f.push(l[a]);for(l.length=0,a=f.length;a--;)f[a].i<y&&f[a].j<y&&f[a].k<y&&l.push(f[a].i,f[a].j,f[a].k);return l},contains:function(e,t){if(t[0]<e[0][0]&&t[0]<e[1][0]&&t[0]<e[2][0]||t[0]>e[0][0]&&t[0]>e[1][0]&&t[0]>e[2][0]||t[1]<e[0][1]&&t[1]<e[1][1]&&t[1]<e[2][1]||t[1]>e[0][1]&&t[1]>e[1][1]&&t[1]>e[2][1])return null;var n=e[1][0]-e[0][0],r=e[2][0]-e[0][0],i=e[1][1]-e[0][1],o=e[2][1]-e[0][1],a=n*o-r*i;if(0===a)return null;var s=(o*(t[0]-e[0][0])-r*(t[1]-e[0][1]))/a,u=(n*(t[1]-e[0][1])-i*(t[0]-e[0][0]))/a;return 0>s||0>u||s+u>1?null:[s,u]}}}();var kt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};mt.shader=v,mt.vertexShader=["uniform float clock;","uniform vec2 mouse;","uniform vec2 resolution;","uniform vec2 dates;","attribute vec4 pos;","attribute vec4 color;","attribute vec4 fugue;","varying float type;","varying vec4 v_stroke;","varying vec4 v_fill;","varying vec4 dim;","uniform sampler2D texture0;","uniform sampler2D texture1;","uniform sampler2D texture2;","uniform sampler2D texture3;","const mat4 modelViewMatrix = mat4(1.);","const mat4 projectionMatrix = mat4(1.);","vec4 unpack_tex(float col) {","    return vec4(mod(col / 1000. / 1000., 1000.),","                mod(col / 1000. , 1000.),","                mod(col, 1000.),","                col);","}","vec4 texel(vec2 get) { return texture2D(texture0, abs(get)); }","vec4 unpack_color(float col) {","    return vec4(mod(col / 256. / 256., 256.),","                mod(col / 256. , 256.),","                mod(col, 256.),","                256. - fugue.y)","                / 256.;","}","vec2 clipspace(vec2 pos) { return vec2(2. * (pos.x / resolution.x) - 1., 1. - ((pos.y / resolution.y) * 2.)); }","void main() {","    float time = clock / 1000.;","    float x = replace_x;","    float y = replace_y;","    float r = replace_r;","    float fill = color.x;","    float stroke = color.x;","    type = fugue.x;","    gl_PointSize =  r;","    v_fill = unpack_color(fill);","    dim = vec4(x, y, r, -r);","    v_stroke = replace_stroke;","    gl_Position = vec4(clipspace(vec2(x, y)),  1., 1.);","}"].join("\n\n"),mt.fragmentShader=["uniform sampler2D texture0;","uniform vec2 resolution;","uniform vec2 dates;","varying float type;","varying vec4 v_stroke;","varying vec4 v_fill;","varying vec4 dim;","vec2 clipspace(vec2 pos) { return vec2(2. * (pos.x / resolution.x) - .5, 1. - ((pos.y / resolution.y))); }","void main() {","    float dist = distance(gl_PointCoord, vec2(0.5));","    if (type == 1. && dist > 0.5) discard;","    gl_FragColor = (v_stroke.x < 0.) ? texture2D(texture0, clipspace(dim.xy + (dim.zw * (gl_PointCoord - .5)))) : v_stroke;","}"].join("\n");var At={appendChild:rt,querySelectorAll:G,querySelector:function(e){return this.querySelectorAll(e)[0]},removeChild:it,insertBefore:nt,__scene__:[],__program__:void 0},Rt=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},St=[],Ft={},Bt={" ":function(e){return e&&e!==__scene__&&e.parent()},">":function(e,t){return e&&e.parent()==t.parent()&&e.parent()},"~":function(e){return e&&e.previousSibling()},"+":function(e,t,n,r){return!e||(n=W(e))&&(r=W(t))&&n==r&&n}},Ct=/^(\*|\w+)?(?:([\.\#]+[\w\-\.#]+)?)(\[([\w\-]+)(?:([\|\^\$\*\~]?\=)['"]?([ \w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^]+)["']?)?\])?(:([\w\-]+)(\(['"]?([^()]+)['"]?\))?)?/,It={circle:{init:function(e){this.fBuffer[4*e]=1,this.indices=[4*e]},cx:function(e){this.posBuffer[this.indices[0]+0]=e},cy:function(e){this.posBuffer[this.indices[0]+1]=e},r:function(e){this.posBuffer[this.indices[0]+2]=e},cz:function(e){this.posBuffer[this.indices[0]+3]=e},fill:function(e){this.colorBuffer[this.indices[0]]=0>e?e:h(e)},stroke:function(e){this.colorBuffer[this.indices[0]]=h(e)},tagName:"circle",schema:"cx cy r cz".split(" ")},ellipse:{init:function(){},tagName:"ellipse",cx:e,cy:e,rx:e,ry:e},rect:{init:function(e){this.fBuffer[4*e]=0,this.indices=[4*e]},tagName:"rect",fill:function(e){this.colorBuffer[this.indices[0]]=0>e?e:h(e)},x:function(e){this.posBuffer[this.indices[0]+0]=e},y:function(e){this.posBuffer[this.indices[0]+1]=e},width:function(e){this.posBuffer[this.indices[0]+2]=e},height:function(e){this.posBuffer[this.indices[0]+3]=e},rx:e,ry:e},image:{init:function(){},tagName:"image","xlink:href":e,height:e,width:e,x:e,y:e},line:{init:function(e){this.indices=[2*e,2*e+1]},tagName:"line",x1:function(e){this.posBuffer[2*this.indices[0]]=e},y1:function(e){this.posBuffer[2*this.indices[0]+1]=e},x2:function(e){this.posBuffer[2*this.indices[1]]=e},y2:function(e){this.posBuffer[2*this.indices[1]+1]=e},stroke:function(e){var t=h(e);this.indices.forEach(function(e){this.colorBuffer[4*e]=t},this)}},path:{init:function(){this.indices=[]},tagName:"path",d:tt,pathLength:e,stroke:function(e){var t=h(e);this.indices.forEach(function(e){this.colorBuffer[4*e]=t},this)}},polygon:{init:function(){},tagName:"polygon",points:e},polyline:{init:function(e){this.indices=[2*e,2*e+1]},tagName:"polyline",points:e},g:{init:function(){},tagName:"g",appendChild:function(e){this.children.push(rt(e))},ctr:function(){this.children=[]}},text:{init:function(){},tagName:"text",x:e,y:e,dx:e,dy:e}},Dt={gl:_t,children:Object.freeze([]),querySelector:$,querySelectorAll:G,createElementNS:t,insertBefore:e,ownerDocument:{createElementNS:function(e,t){return t}},previousSibling:function(){canvas.scene[canvas.__scene__.indexOf(this)-1]},nextSibling:function(){canvas.scene[canvas.__scene__.indexOf()+1]},parent:function(){return __scene__},opacity:function(e){this.fBuffer[this.indices[0]+1]=256-256*e},transform:function(){},getAttribute:function(e){return this.attr[e]},setAttribute:function(e,t){this.attr[e]=t,this[e]&&this[e](t),t&&t.texture&&this.mesh.bindMaterial(e,t)},removeAttribute:function(e){delete this.attr[e]},textContent:e,removeEventListener:e,addEventListener:addEventListener,style:{setProperty:e},ownerSVGElement:{createSVGPoint:e}},Nt=[function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}];ot.prototype={update:function(e){this.data?_t.texImage2D(_t.TEXTURE_2D,0,_t.RGBA,_t.RGBA,_t.UNSIGNED_BYTE,e||this.data):_t.texImage2D(_t.TEXTURE_2D,0,_t.RGBA,this.width,this.height,0,_t.RGBA,_t.FLOAT,null)},size:function(e,t){return arguments.length?(this.width=e,this.height=t||e,this):this.width*this.height},z:function(){var e=Math.sqrt(this.size());return function(t,n){return-1/e*~~(n%e)}},x:function(){var e=Math.sqrt(this.size());return function(t,n){return-1/e*~~(n%e)}},y:function(){var e=Math.sqrt(this.size());return function(t,n){return-1/e*~~(n/e)}},subImage:function(e,t,n){_t.bindTexture(_t.TEXTURE_2D,this.texture),_t.texSubImage2D(_t.TEXTURE_2D,0,e,t,n.length/4,1,_t.RGBA,_t.FLOAT,new Float32Array(n))},repeat:function(){return this.task=function(){this.update()}.bind(this),bt.push(this.task),this},stop:function(){this.task&&bt.splice(bt.indexOf(this.task)),delete this.task},appendChild:function(e){return this.__renderTarget__||lt.call(this),this.__scene__[this.__scene__.length]=this.__renderTarget__.append(e.tagName||e)},valueOf:function(){return-this.id},copy:function(){return mt.texture(this.src)},pipe:ut,querySelector:$,querySelectorAll:G,ownerDocument:{createElementNS:function(e,t){return t}},unwrap:ct,adnan:!0};var zt=["attribute vec2 pos;","  void main() {","  gl_Position = vec4(pos.xy, 1.0 , 1.0);","  }"].join("\n"),Mt=["uniform sampler2D texture;","uniform vec2 resolution;","uniform vec2 mouse;","uniform vec2 dimensions;","uniform float gravity;","uniform float inertia;","uniform float drag;","uniform float clock;","void main() {","vec2 TARGET = vec2(mouse / resolution);","vec4 data = texture2D(texture, (gl_FragCoord.xy) / dimensions);","vec2 pos = data.xy;","vec2 vel = data.zw;","if (pos.x > 1.) { vel.x *= -1.; pos.x = 1.; } ","if (pos.y > 1.) { vel.y *= -1.; pos.y = 1.; } ","if (pos.x < 0.) { vel.x *= -1.; pos.x = 0.; } ","if (pos.y < 0.) { vel.y *= -1.; pos.y = 0.; } ","pos += inertia  * vel;","vel += gravity * normalize(TARGET - pos);","vel *= drag;","gl_FragColor = vec4(pos, vel);","}"].join("\n");Date.now(),mt.sim.particles=function(e){function t(){mt.uniform("gravity",-1*mt.uniform("gravity"))}function n(){mt.uniform("dimensions",[s,u]),mt.uniform("gravity",.1),mt.uniform("inertia",.005),mt.uniform("drag",.991);for(var e=-1;++e<10;)o(a/10,[1,2].map(Math.random))}function r(e,t){o(t||a*Math.random(),e||[0,0])}function o(e,t){var n=~~(c%s),r=~~(c/u),i=[{x:n,y:r,size:e}];!function o(e){var t=e.x+e.size,n=t-s;s>t||(e.size-=n,i.push(e={x:0,y:(e.y+1)%u,size:n}),o(e))}(i[0]),i.forEach(function(e){for(var n=[],r=-1;++r<e.size;)n.push(t[0],t[1],pt(-1,1),pt(-1,1));f.subImage(e.x,e.y,n)}),c+=e,c%=a}var a=i(e),s=Math.sqrt(a),u=s,c=0,f=mt.texture(a),h=mt.shader().map(Mt);return f.pipe(h),h.pipe(f),h.invalidate(),setTimeout(n,1e3),l(f,{emit:r,reverse:t})}}();